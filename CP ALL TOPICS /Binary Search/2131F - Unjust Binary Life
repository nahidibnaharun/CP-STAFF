#include<bits/stdc++.h>
using namespace std;
using ll = long long;
using ull = unsigned long long;
using ui = unsigned int;
// const int INF=500;
const ll INF = 2e5+5;
/*
//      _   __  ___  __   __ _______ _______
//     / | / / / _ \ \ \__\ \\__  __\\  __  \ 
//    /  |/ / / /_\ \ \  ___ \  \ \   \ \ \  \ 
//   / /|  / / ____  \ \ \  \ \ _\ \___\ \/  /
//  /_/ |_/ /_/    \__\ \_\  \_\\______\\___/

ID: mdnahidibnaharun
LANG: C++
TASK: practice 
*/
void solve(){
int n;cin>>n;string a,b;cin>>a>>b;
vector<int>pfa(n+1,0),pfb(n+1,0);
for(int i=1;i<=n;++i)pfa[i]=pfa[i-1]+(a[i-1]=='1');
for(int i=1;i<=n;++i)pfb[i]=pfb[i-1]+(b[i-1]=='1');
vector<pair<ll,pair<ll,ll>>>vc;vc.reserve(n);
for(int i=1;i<=n;i++){
    ll by=pfb[i],dy=i-by,ey=2*by-i;vc.push_back({ey,{by,dy}});
}
sort(vc.begin(),vc.end(),[](auto &l,auto &r){
    if(l.first!=r.first)return l.first<r.first;
    return l.second.first<r.second.first;
});
vector<ll>pfbc(n+1,0),pfdc(n+1,0);
for(int i=1;i<=n;i++){
    pfbc[i]=pfbc[i-1]+vc[i-1].second.first;
    pfdc[i]=pfdc[i-1]+vc[i-1].second.second;
}
ll ttd=pfdc[n],ans=0;
for(int i=1;i<=n;i++){
    ll ax=pfa[i],cx=i-ax,tx=i-2*ax;
    int k=int(upper_bound(vc.begin(),vc.end(),make_pair(tx,make_pair(LLONG_MAX,LLONG_MAX)),
    [](const pair<ll,pair<ll,ll>>& a,const pair<ll,pair<ll,ll>>&b){
        if(a.first !=b.first)return a.first<b.first;
        return a.second.first<b.second.first;
    })-vc.begin());
    ll smbk=pfbc[k],smdk=pfdc[k],pt1=(ll)k*ax+smbk,pt2=(ll)(n-k)*cx+(ttd-smdk);
    ans+=pt1+pt2;
}cout<<ans;
}
int main(){
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    int t;cin>>t;
    while(t--){
        solve();
        cout<<endl;
    }    
return 0;
}
